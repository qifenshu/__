<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1, user-scalable=no" />
  <style>
    .demo {margin: 40px 10px; padding: 5px; max-width: 200px;}
    .radius {border-radius: 5px;}

    /* iOS 8+ */
    .normal {
      border-bottom: 1px solid red;
    }
    @media (-webkit-min-device-pixel-ratio: 2) {
      .hairline {
        border-width: 0.5px;
      }
    }

    /* box-shadow 会带来性能问题，颜色不好处理、有阴影。 圆角可以实现  */
    .shadow {
      box-shadow:0 1px 1px -1px rgba(0, 0, 0, 0.5);
    }

    /* 圆角无法实现？ 在 pc 上看不到效果，代码多、多边线不容易支持 */
    .bg {
      background-image:linear-gradient(180deg, red, red 50%, transparent 50%),
        linear-gradient(270deg, red, red 50%, transparent 50%),
        linear-gradient(0deg, red, red 50%, transparent 50%),
        linear-gradient(90deg, red, red 50%, transparent 50%);
      background-size: 100% 1px,1px 100% ,100% 1px, 1px 100%;
      background-repeat: no-repeat;
      background-position: top, right top, bottom, left top;
      padding: 10px;
    }

    /* framework7 等许多 UI 库采用此方法。 圆角无法实现  */
    .tf {
      position: relative;
      border-radius: 6px;
    }
    /* https://github.com/nolimits4web/Framework7/blob/master/src/less/ios/_mixins.less
      hairline
    */
    .tf::before {
      content: '';
      position: absolute;
      z-index: 15;
      left: 0;
      top: 0;
      bottom: auto;
      right: auto;
      display: block;
      width: 100%;
      height: 1px; background-color: red;
      transform-origin: 50% 0;
      transform: scaleY(.5);
    }
    .tf::after {
      content: '';
      position: absolute;
      z-index: 15;
      left: 0;
      bottom: 0;
      right: auto;
      top: auto;
      display: block;
      width: 100%; /* or use `right: 0` to get it */
      /* framework7 use height instead of border-height  */
      height: 1px; background-color: red;
      /* border-bottom: 1px solid red; */
      transform-origin: 50% 100%;
      transform: scaleY(.5); /* scale(1/dpr) */
    }

    /* https://weui.io/#button 用 伪元素 放大两倍再缩小 */
    .cover {
      position: relative;
    }
    .cover::after {
      content: "";
      width: 200%;
      height: 200%;
      position: absolute;
      top: 0;
      left: 0;
      transform: scale(.5);
      transform-origin: 0 0;
      /* 三星Grand Prime 等需要 -webkit- 前缀  */
      -webkit-transform: scale(.5);
      -webkit-transform-origin: 0 0;
      box-sizing: border-box;
      border: 1px solid red;
      border-radius: 10px;
    }
  </style>
</head>
<body>
  viewport: width=device-width, initial-scale=1.0 <br>
  window.devicePixelRatio: <script>document.write(window.devicePixelRatio)</script>
  documentElement.clientWidth: <script>document.write(document.documentElement.clientWidth)</script>

  <div class="demo radius normal hairline">
    <b>Abandon</b> 0.5px, Normal on iOS8+, but no line on some Android
  </div>
  <div class="demo radius shadow">
    <b>Abandon</b> box-shadow, Not quite normal on iOS
  </div>
  <div class="demo radius bg">
    [<b>Recommend</b> under some conditions] background-image, Complex statement, Work but no border radius
    华为 P8 / MateS 不显示边框，可能是写法问题？
  </div>

  <div class="demo radius tf">
    <b>Recommend</b> under some conditions] transform: scale, Work but no border radius
  </div>
  <div class="demo radius tf" style="height:30px; overflow:scroll;">
    <b>Problem</b> transform: scale, when have scroller，部分 Android 浏览器不显示“底边线”
  </div>

  <div class="demo radius cover">[Recommend under some conditions]</div>
  <div class="demo radius cover" style="height: 31px;">
    <b>Problem</b> odd number 奇数值 在某些机型有显示问题（因为产生了小数？）
  </div>
  <div class="demo radius cover" style="display: inline-block;">inline-block</div>
  <div class="demo radius cover" style="display: inline-block; overflow: hidden;">em</div>
  <div class="demo radius cover" style="display: inline-block; overflow: hidden;">em</div>

  <p>
    <b>猜想：</b> transform scale 缩放产生的边框、实际渲染像素都 小于1px ，
    浏览器在处理这个小数值时、可能需要“舍弃”或“从邻近像素补充”颜色，导致有时候“仅仅因为”内容文字不同、
    所占的像素宽度不同，而导致 scale 后的 小于1px 的边线不能显示。（Chrome 浏览器）
  </p>
</body>
</html>
