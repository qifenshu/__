<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>test</title>
</head>
<body>
  <script src="promise.js"></script>
  <script>
    function ajaxSimulation() {
      var promise = new Promise();

      setTimeout(function () {
        promise.resolve({ success: true });
        // promise.reject({ error: '-1' });
      }, 1000);

      return promise;
    }

    ajaxSimulation().then(data => console.log(data), error => console.log(error));

    // 使用 when
    var promise1 = ajaxSimulation();
    var promise2 = ajaxSimulation();
    Promise.when(promise1, promise2).then(function (data1, data2) {
      // 当promise1 promise2 都正确返回时处理
      console.log(data1, data2);
    }, error => console.log(error));
  </script>
</body>
</html>
